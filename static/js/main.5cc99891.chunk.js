(this.webpackJsonpspacetagram=this.webpackJsonpspacetagram||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),c=n(7),r=n.n(c),i=(n(13),n(8)),o=n(2),d=n(0);function u(e){var t=e.setLoggedInUser;return Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:function(){t("")},children:" Log Out "})})}var l=n(6);function j(e){var t=e.url,n=e.description,a=e.date,c=e.id,r=e.title,i=e.userId,u=(e.userName,e.userLiked),j=e.deleteId,b=e.setDeleteId,h=Object(s.useState)(!1),m=Object(o.a)(h,2),p=m[0],f=m[1];Object(s.useEffect)((function(){u.forEach((function(e){c===e.nasa_id&&f(!0)}))}),[u,b]),console.log(j);function O(){u.forEach((function(e){c===e.nasa_id&&(b((function(t){return e.id})),fetch("https://my-json-server.typicode.com/JZims/spacetagram-shopify/liked/".concat(j),{method:"DELETE",headers:{"Content-Type":"applicaiton/json"}}).then((function(){return f(!1)})))}))}return Object(d.jsxs)("div",{className:"image_div",children:[Object(d.jsx)("img",{src:t,alt:n,width:"650",height:"400",className:"galaxy_image"}),Object(d.jsxs)("div",{className:"galaxy_info",children:[Object(d.jsx)("h3",{children:r}),Object(d.jsxs)("h5",{children:["Date Taken: ",a]}),Object(d.jsx)("p",{children:n}),p?Object(d.jsxs)("button",{id:"unlike_button",onClick:function(){return O()},children:[" ",Object(d.jsx)(l.a,{style:{color:"blue"}})," Liked "]}):Object(d.jsxs)("button",{id:"like_button",onClick:function(){fetch("https://my-json-server.typicode.com/JZims/spacetagram-shopify/liked",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nasa_id:c,userId:i})}).then((function(){return f(!0)}))},children:[" ",Object(d.jsx)(l.a,{})," Like "]})]})]})}function b(e){var t=e.picData,n=e.setSelectedGalaxy,a=e.user,c=Object(s.useState)([]),r=Object(o.a)(c,2),i=r[0],u=r[1],l=Object(s.useState)(),b=Object(o.a)(l,2),h=b[0],m=b[1];Object(s.useEffect)((function(){fetch("https://my-json-server.typicode.com/JZims/spacetagram-shopify/users/".concat(a.id,"?_embed=liked")).then((function(e){return e.json()})).then((function(e){u(e.liked)}))}),[a.id]);var p=t.map((function(e){return Object(d.jsx)(j,{id:e.data[0].nasa_id,title:e.data[0].title,date:e.data[0].date_created,description:e.data[0].description,url:e.links[0].href,userId:a.id,userName:a.username,userLiked:i,deleteId:h,setDeleteId:m},e.data[0].nasa_id)}));return Object(d.jsxs)("div",{children:[Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(e.target.galaxy.value)},id:"galaxies",children:[Object(d.jsx)("label",{htmlFor:"galaxy",children:"Which Galaxy would you like to search for?"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"text",id:"galaxy",name:"galaxy",placeholder:"Enter a galaxy name:"}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{type:"submit",form:"galaxies",children:"Submit"})]}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),p]})}function h(e){var t=e.setLoggedInUser;return Object(d.jsxs)("div",{id:"login_page",children:[Object(d.jsx)("h2",{children:"Please Log In"}),Object(d.jsxs)("form",{id:"login",onSubmit:function(e){e.preventDefault();var n=e.nativeEvent.submitter.name,s=e.target.username.value,a=e.target.password.value;"login"!==n?fetch("https://my-json-server.typicode.com/JZims/spacetagram-shopify/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:a})}).then((function(e){return e.json()})).then((function(e){if(console.log(e),""===e.username)return window.alert("Incorrectly formatted username or password. Please Try again.");t(e)})):fetch("https://my-json-server.typicode.com/JZims/spacetagram-shopify/users?username=".concat(s)).then((function(e){return e.json()})).then((function(e){if(console.log(e),!(e.length>=1&&e[0].password===a))return window.alert("Incorrect username or password. Please Try again.");t(e[0])}))},children:[Object(d.jsx)("input",{id:"username",name:"username",placeholder:"Username"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{id:"password",type:"password",name:"password",placeholder:"password"}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{type:"submit",form:"login",value:"login",name:"login",children:"Log In"}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{children:"Or..."}),Object(d.jsx)("button",{type:"submit",form:"login",value:"new_user",name:"new_user",children:"Sign Up"})]})]})}n(15);var m=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(""),r=Object(o.a)(c,2),l=r[0],j=r[1],m=Object(s.useState)(""),p=Object(o.a)(m,2),f=p[0],O=p[1];return Object(s.useEffect)((function(){fetch("https://images-api.nasa.gov/search?q=".concat(l,"-galaxy-cluster")).then((function(e){return e.json()})).then((function(e){a(Object(i.a)(e.collection.items))}))}),[l]),""===f?Object(d.jsx)(h,{setLoggedInUser:O}):Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(u,{setLoggedInUser:O}),Object(d.jsx)(b,{picData:n,setSelectedGalaxy:j,user:f})]})};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(m,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.5cc99891.chunk.js.map